# 📚 NovelCraft 使用指南

欢迎使用 NovelCraft！这是一款专为网文作者和爱好者设计的 Obsidian 插件，帮助你深度分析小说的写作技法、人物塑造、情节结构。

---

## 🚀 快速开始

### 1. 配置 LLM 服务

首先需要配置 AI 服务才能使用分析功能：

1. 打开 Obsidian 设置 → 第三方插件 → NovelCraft
2. 在「LLM 配置」区域添加你的 AI 服务：
   - **服务名称**：自定义名称（如 "DeepSeek"）
   - **API 地址**：
     - OpenAI: `https://api.openai.com/v1`
     - DeepSeek: `https://api.deepseek.com`
     - Claude: `https://api.anthropic.com`
   - **API Key**：你的 API 密钥
   - **模型**：如 `gpt-4`、`deepseek-chat` 等

### 2. 导入书籍

**手动创建书籍目录**

如果没有使用下载功能，需要手动创建目录结构：

1. 在笔记根目录创建 `NovelCraft/downloads/` 文件夹
3. 将小说放入downloads文件夹
4. 点击左侧边栏的 📚 图标打开主面板查看书籍

---

## 📖 核心功能

### 一、书籍分析

对整本书或指定章节进行 AI 分析：

1. 在主面板找到书籍，点击「分析」
2. 选择分析模式：
   - **快速模式**：故事梗概、核心人物、主要技法
   - **标准模式**：+ 情绪曲线、章节结构、伏笔分析
   - **深度模式**：+ 逐章拆解、写作复盘
3. 选择小说类型（都市、玄幻、仙侠等）
4. 设置章节范围
5. 点击「开始分析」

分析结果会自动生成笔记保存到 `NovelCraft/notes/书名/` 目录。

---

### 二、故事单元管理

将小说按情节单元划分，便于结构化分析。

#### 创建故事单元

**方法一：使用编辑器工具栏**
1. 打开任意章节文件
2. 顶部会显示故事单元工具栏
3. 选中文本后点击「标记起始」和「标记结束」
4. 点击「创建故事单元」

**方法二：使用侧边栏**
1. 点击右侧边栏的「故事单元管理」图标
2. 点击「➕ 新建」按钮
3. 填写标题、选择轨道、设置章节范围

#### 管理故事单元

- **轨道分组**：主线、支线、回忆等
- **内联编辑**：点击卡片展开直接编辑
- **关联人物**：选择参与的角色

---

### 三、AI 故事拆解 ⭐

这是 NovelCraft 的核心功能，使用「七步故事法」分析网文爽点结构。

#### 使用方法

1. 创建或选择一个故事单元
2. 点击展开卡片
3. 切换到「🤖 AI分析」标签页
4. 选择分析模板（默认：七步故事法）
5. 点击「🚀 开始分析」

#### 七步故事法

分析网文的爽点循环结构：

| 步骤 | 说明 | 示例 |
|------|------|------|
| 主角优势 | 隐藏实力、道具、潜力 | 隐藏金丹修为，持有上古炼器术 |
| 反派+信息差 | 反派及其对主角的错误认知 | 长老之子（筑基），误认主角炼气期 |
| 初次摩擦 | 主角与反派的初次冲突 | 手下挑衅→主角打脸→反派记恨 |
| 负面预期 | 周围人不看好主角 | 众人看衰，认为必败 |
| 高潮反杀 | 主角反杀反派 | 三次反转秒败反派 |
| 震惊反应 | 周围人的震惊 | 同门震惊→长老侧目→宗主召见 |
| 收获+升级 | 主角的收获和提升 | 夺宝物，入内门，阶层↑ |

#### 分析结果

- **精简表格**：关键词形式，可手动编辑
- **故事梗概**：50-100字情节概括
- **情绪折线**：读者情绪起伏
- **人物关系**：友方/中立/敌方分类
- **完整报告**：自动生成 MD 文档

---

### 四、基本信息

在故事单元的「📝 基本信息」标签页：

- **AI 分析摘要**：显示故事梗概、情绪折线、人物关系
- **基础设置**：标题、轨道、章节范围
- **人物关联**：选择参与的角色
- **备注**：添加你的阅读笔记和心得

---

## 💡 使用技巧

### 分析长篇小说

对于超过 50 章的长篇小说，建议：

1. **分批分析**：每次分析 30-50 章
2. **使用增量分析**：
   - 继续分析：从上次结束位置继续
   - 追加分析：自定义范围追加
3. **断点续传**：分析中断后可从断点恢复

### 故事单元划分建议

- 按「爽点循环」划分：一个完整的冲突-解决周期
- 按「情节弧线」划分：一个完整的小故事
- 按「章节数量」划分：每 5-10 章一个单元

### 提高分析质量

1. 选择正确的小说类型
2. 添加自定义提示词
3. 手动编辑和补充分析结果

---

## ⌨️ 快捷命令

使用 `Ctrl/Cmd + P` 打开命令面板，输入 "NovelCraft"：

| 命令 | 说明 |
|------|------|
| 打开主面板 | 打开侧边栏主面板 |
| 搜索小说 | 打开搜索弹窗 |
| 分析当前书籍 | 分析当前打开的文档 |
| 打开对话 | 打开追问对话 |

---

## 📁 文件结构

```
NovelCraft/
├── books/                    # 导入的书籍
│   ├── 00-书库总览.md         # 书库总览
│   └── 书名/
│       ├── _book_meta.md     # 书籍元数据
│       ├── 书名-管理.md       # 书籍管理文件
│       ├── chapters/         # 章节文件
│       └── 分析报告/          # AI分析报告
└── notes/                    # 分析笔记
    └── 书名/
        ├── 00-概览.md
        ├── 01-人物图谱.md
        ├── 02-情节分析.md
        └── 03-写作技法.md
```

---

## ❓ 常见问题

### Q: 分析失败怎么办？

1. 检查 LLM 服务配置是否正确
2. 检查 API Key 是否有效
3. 尝试减少分析章节数量
4. 查看控制台错误信息

### Q: 如何更新分析结果？

在 AI 分析标签页点击「🔄 重新分析」按钮。

### Q: 分析结果可以编辑吗？

可以！表格中的每个单元格都可以直接编辑，失去焦点时自动保存。

### Q: 如何导出分析结果？

点击「📄 导出笔记」按钮，会生成 Markdown 文件。

---

## 🔗 相关链接

- [GitHub 仓库](https://github.com/your-repo/novel-craft)
- [问题反馈](https://github.com/your-repo/novel-craft/issues)
- [更新日志](./CHANGELOG.md)

---

> 💡 **提示**：这个文档可以删除，不会影响插件功能。
> 
> 如需再次查看，可以在插件设置中重新生成。

---

*NovelCraft v1.4.2 - 网络小说拆书分析插件*
